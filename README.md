# NTP 

## NTPとは何ですか？その役割は何ですか？

网络时间协议NTP（Network Time Protocol）是TCP/IP协议族里面的一个应用层协议，用来使客户端和服务器之间进行时钟同步，提供高精准度的时间校正。NTP服务器从权威时钟源（例如原子钟、GPS）接收精确的协调世界时UTC，客户端再从服务器请求和接收时间。


## NTPサーバーをどのように構成し管理しますか？

## 時間同期の重要性は何ですか？

出于诸多原因，精确的时间对于网络至关重要，
比如：
- 网络管理：从不同网络设备采集来的日志信息进行分析时，需要以时间作为参照依据。如果不同设备上的系统时间不一致，会因先后顺序等问题给故障定位带来障碍。
- 计费系统：计费业务对于时间尤其敏感，要求所有设备的时间保持一致，否则会引起计费不准确，导致用户质疑、投诉等。
- 协同处理：多个系统协同处理同一个复杂事件，为保证正确的执行顺序，多个系统必须参考同一时钟。
- 系统时间：某些应用或服务需要准确的时间来标记用户登录、交易等操作信息，确保可追溯记录。

因此有一个统一的标准时间对于网络而言意义重大。

NTP就是用来使网络中的各个主机时钟同步的一种协议，他把主机的时钟同步到协调世界时UTC，其精度在LAN网络内可达1毫秒内，在WAN网络上可以达到几十毫秒内。


### NTPサーバーの階層構造はどうなっていますか？

NTP允许客户端从服务器请求和接收时间，而服务器又从权威时钟源（例如原子钟、GPS）接收精确的协调世界时UTC。

NTP以层级来组织模型结构，层级中的每层被称为Stratum。通常将从权威时钟获得时钟同步的NTP服务器的层数设置为Stratum 1，并将其作为主时间服务器，为网络中其他的设备提供时钟同步。而Stratum 2则从Stratum 1获取时间，Stratum 3从Stratum 2获取时间，以此类推。时钟层数的取值范围为1～16，取值越小，时钟准确度越高。
层数为1～15的时钟处于同步状态；

层数为16的时钟被认为是未同步的，不能使用的。

同一层级的设备可以对等相连，为对等组中的所有设备提供更健全稳定的时间。

<img width="558" alt="スクリーンショット 2024-06-21 15 20 37" src="https://github.com/chaseDeil/LearningMemo/assets/16752412/6a3b3235-723b-44c5-8ac5-4b22a7966b8c">

